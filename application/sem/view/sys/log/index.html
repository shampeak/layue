
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layuiAdmin 网站用户</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../../layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../../layuiadmin/style/admin.css" media="all">
    <!--<link rel="stylesheet" href="../../../layuiadmin/style/global.css" media="all">-->
    <link rel="stylesheet" href="/static/Sham.css" media="all">
</head>
<body>

<div class="layui-fluid">
    <!--<div class="layui-card">-->
        <!--<div class="layui-card-body">-->
            <!--<div class="layui-form">-->

                <!--<div class="layui-inline text-sm">-->
                    <!--<label class="layui-form-label">关键词</label>-->
                    <!--<div class="layui-input-block">-->
                        <!--<input name="key" type="text" class="layui-input layui-input-sm" placeholder="">-->
                    <!--</div>-->
                <!--</div>-->



                <!--<div class="layui-inline">-->
                    <!--<label class="layui-form-label"></label>-->
                    <!--<button class="layui-btn layui-btn-sm layuiadmin-btn-admin" lay-submit lay-filter="LAY-front-search">-->
                        <!--<i class="layui-icon layui-icon-search layuiadmin-button-btn"></i> 提交-->
                    <!--</button>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <div class="layui-card">
        <div class="layui-card-body">

            <table id="LAY-content-list" lay-filter="LAY-content-list"></table>


            <!-- 操作 -->
            <script type="text/html" id="table-admin-manage">
            <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="info"><i class="layui-icon layui-icon-edit"></i>详细</a>
            </script>
        </div>
    </div>




</div>

<script src="../../../layuiadmin/layui/layui.js"></script>
<script>
    layui.config({
        base: '../../../layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'laydate','table'], function(){
        var $ = layui.$
                ,form = layui.form
                ,admin = layui.admin
                ,table = layui.table;
        var laydate = layui.laydate;

        //角色管理
        table.render({
            elem: '#LAY-content-list'
            ,url: '/api/sys.log/index' //模拟接口
            ,cols: [[
                {field: 'id', width: 80, title: 'Id'}
                ,{field: 'cgi', title: '名称'}
                ,{field: 'code', title: 'code',width:60}
                ,{field: 'msg', title: '消息'}
                ,{field: 'iniAt', title: '开始', templet: '<div>{{ layui.laytpl.toDateString(d.iniAt*1000) }}</div>'}
                ,{field: 'closeAt', title: '结束', templet: '<div>{{ layui.laytpl.toDateString(d.closeAt*1000) }}</div>'}
                ,{field: 'excuteTime', title: '执行'}
                ,{title: '操作', width:80, align: 'center', fixed: 'right', toolbar: '#table-admin-manage'}
            ]]
//            ,format: 'yyyy年MM月dd日'
            ,page: true
            ,limit: 10
            //,height: 'full-220'
            ,text: '对不起，加载出现异常！'
        });

        //监听工具条
        table.on('tool(LAY-content-list)', function(obj) {
            var data = obj.data;
            if (obj.event === 'info') {
                layer.open({
                    type: 2
                    ,title: '编辑角色'
                    ,content: '/sem/sys.log/show?id='+data.id
                    ,area: ['500px', '450px']
                    ,btn: ['确定', '取消']
                    ,yes: function(index, layero){
                    }
                    ,success: function(layero, index){
                    }
                })

            }
        });

        //监听搜索
        form.on('submit(LAY-front-search)', function(data){
            var field = data.field;
            //执行重载
            table.reload('LAY-content-list', {
                where: field
            });
        });

        //事件
        var active = {
        };

        $('.layui-btn.layuiadmin-btn-admin').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>
</body>
</html>
